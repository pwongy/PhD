%% =================================================================== Meta Data

% AUTHOR: 		PAUL CHUN HYMN WONG
% DOCUMENT: 	PHD DISSERTATION
% START DATE: 	JULY 2011
% END DATE:		FEB 2016

%% ==================================================================== Reminder

% TODO: Build document twice to ensure proper TOC and bookmark generation

%% ======================================================================= Notes

% USEFUL REFERENCE: `The Not So Short Introduction to LaTeX2e'

%% =============================================================== Document Type

\documentclass[12pt,a4paper]{report}

%% ============================================================= Import packages

% Miscellaneous
	\usepackage{cite}
	\usepackage{pdflscape}						% Page rotation
		% \begin{landscape}						% Usage
		% \end{landscape}
% 	\usepackage[showframe]{geometry}
	
% Margins
	\usepackage{anysize}
		\marginsize{3cm}{2.5cm}{2.5cm}{2.5cm}	% Order: {left}{right}{top}{bottom}

% Fonts
% 	\usepackage{upgreek}
	\usepackage{amsmath}
	\usepackage{newtxtext}						% Roman font
	\usepackage[T1]{fontenc}
 	\usepackage[uprightGreek]{newtxmath}		% Math font
%    		\usepackage[frenchmath]{newtxsf}		% For sans serif math
% 	\usepackage[scale=0.9]{tgheros}				% Sans serif font (included in New TX)
	\usepackage[scale=0.9]{tgcursor}			% Code font

% Math
	% Useful posts:
	% http://newsgroups.derkeiler.com/Archive/Comp/comp.text.tex/2007-09/msg00181.html
	% http://tex.stackexchange.com/questions/25249/how-do-i-use-a-particular-font-for-a-small-section-of-text-in-my-document
	\DeclareMathVersion{sans}
% 	\SetSymbolFont{operators} {sans}{OT1}{ntxmath}{m}{n}
% 	\SetSymbolFont{letters} {sans}{OML}{ntxsfmi}{m}{it}
% 	\SetSymbolFont{symbols} {sans}{OMS}{ntxsy}{m}{n}
	% Command to change is \mathversion{sans/normal}
	\usepackage{nicefrac}
			
% Customise section styles
	\usepackage{sectsty}			
		\allsectionsfont{\sffamily}
	
% Customise contents pages
	\usepackage{tocloft}
		\addtocontents{toc}{\cftpagenumbersoff{chapter}}
	
	\renewcommand{\contentsname}{{\sffamily Table of Contents}}
	\renewcommand{\listfigurename}{{\sffamily List of Figures}}
	\renewcommand{\listtablename}{{\sffamily List of Tables}}
	\renewcommand{\cftchapfont}{\sffamily\bfseries}

% Customise headers/footers
	\usepackage{fancyhdr}
		\setlength{\headheight}{14.5pt}
	
	\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\space#1}{}} 
	\renewcommand{\sectionmark}[1]{\markright{#1}}
	\renewcommand{\headrulewidth}{0.25pt}
	\renewcommand{\footrulewidth}{0.0pt}
	
	% Format for plain pages
	\fancypagestyle{plain}{
		\fancyhf{}
		\fancyfoot[C]{\sffamily \thepage}
		\renewcommand{\headrulewidth}{0pt}
		\renewcommand{\footrulewidth}{0pt}
	}
	
% Paragraph formatting
 	\setlength{\parindent}{0cm}

	\usepackage[defaultlines=2,all]{nowidow}
	\usepackage{setspace}
		% Title page
		\newcommand{\setstretchtitle}{\setstretch{1.3}
		\setlength{\parskip}{12pt}}
		% Table of Contents, etc.
		\newcommand{\setstretchtoc}{\setstretch{1.4}
		\setlength{\parskip}{4pt}}
		% Body
		\newcommand{\setstretchnormal}{\setstretch{1.6}
		\setlength{\parskip}{14pt plus4pt minus2pt}}
		% Code
		\newcommand{\setstretchcode}{\setstretch{1.0}
		\setlength{\parskip}{0.5ex}}
		% References
		\newcommand{\setstretchref}{\setstretch{1.3}
		\setlength{\parskip}{14pt}}
			
% Figures and captions
	\usepackage{graphicx}
		\DeclareGraphicsExtensions{.pdf,.png,.jpg}
	\usepackage[font={small,stretch=1.3}]{caption}
		\captionsetup[figure]{labelfont={sf,bf},textfont={sf}}
		\captionsetup[table]{labelfont={sf,bf},textfont={sf}}
 	\usepackage{subcaption}
	
% Tables
	\usepackage{array}
	\usepackage{tabularx}
	\usepackage{tabulary}
	\usepackage{booktabs}
		\renewcommand{\arraystretch}{1.3}
	\usepackage{csvsimple}
	
% Lists
	\usepackage{enumitem}
		\setlist[itemize,1]{leftmargin=*,labelindent=3.5ex,labelsep=2ex,topsep=-6pt,itemsep=0pt}
		\setlist[enumerate,1]{leftmargin=*,labelindent=3.5ex,labelsep=2ex,topsep=-6pt,itemsep=0pt}
		% http://tex.stackexchange.com/questions/56246/indent-list-bullet-and-add-space-between-bullet-and-text
		% http://tex.stackexchange.com/questions/199118/modifying-whitespace-before-and-after-list-separately-using-enumitem-package
		%
		% My settings:
			% Before   [topsep=-6pt,itemsep=0pt]
			% After	   \vspace{1ex}
		
% Textbox
	\usepackage{tcolorbox}
		\tcbset{colback=red!5!white,colframe=red!80!black,
			fonttitle=\sffamily\bfseries,fontupper=\sffamily,
			width=12.5cm,arc=0mm,boxsep=2.5mm,left=0mm,right=2ex,
			lefttitle=1mm,toptitle=0.8mm}

% Code
	\usepackage{listings}
	\usepackage{color}

	\definecolor{background}{rgb}{0.95,0.95,0.95}
	\definecolor{mygreen}{rgb}{0,0.6,0}
	\definecolor{mymauve}{rgb}{0.58,0,0.82}
	
	\lstset{
 		backgroundcolor=\color{background},	% choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
		basicstyle={\fontsize{9}{12}\ttfamily},	% the size of the fonts that are used for the code
		breakatwhitespace=false,         	% sets if automatic breaks should only happen at whitespace
		breaklines=true,                 	% sets automatic line breaking
		commentstyle=\color{mygreen},    	% comment style
		keepspaces=true,                 	% keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
		keywordstyle=\color{blue},			% keyword style
		numbers=none,						% where to put the line-numbers; possible values are (none, left, right)
		showspaces=false,                	% show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
		showstringspaces=false,          	% underline spaces within strings only
		showtabs=false,                  	% show tabs within strings adding particular underscores
		stringstyle=\color{mymauve},     	% string literal style
		tabsize=4,                       	% sets default tabsize to 2 spaces
	}
	
% Add entire PDF documents
 	\usepackage[final]{pdfpages}
	
% Chemical species and equations
	\usepackage[version=4]{mhchem}
	
% Appendices
	\usepackage[toc]{appendix}
	\usepackage{xpatch}

% Links - Must be last package loaded
	\usepackage{url}
 	\usepackage[bookmarks=true,bookmarksnumbered=true]{hyperref}	
	
%% ============================================================ Other formatting

%% Correct bad hyphenation
	\hyphenation{peri-pheral naso-pharynx other-wise tissue major-ity 
	histo-log-i-cal spiral thres-holds window ANSYS COMSOL MATLAB figure table
	Frijns}
	\brokenpenalty10000\relax
	
%% Footnotes as symbols
	\usepackage[symbol,bottom,hang]{footmisc}

%% Custom commands
	\newcommand{\submissiondate}{February 2016}
	\newcommand{\invivo}{\textit{in vivo}}
	\newcommand{\invitro}{\textit{in vitro}}
	\newcommand{\insilico}{\textit{in silico}}
	\newcommand{\insitu}{\textit{in situ}}
	\newcommand{\etal}{\textit{et~al.}}
	\newcommand{\boxtitle}{This chapter addresses the following questions:}
	\newcommand{\tableindent}{\hspace{4mm}}
	\newcommand{\bekesy}{B{\'e}k{\'e}sy}
	
% Change bibliography title to ``References''
 	\renewcommand\bibname{References}

% Only compile selected section(s)
% 	\includeonly{Preamble/preamble,Validation/validation}

%% =========================================================== Document Sections

\begin{document}

	\include{Preamble/preamble}
	\include{Introduction/introduction}			% Chapter 1: Introduction
	\include{Background/background}				% Chapter 2 & 3: Background
	\include{Methodology/development}			% Chapter 4: Model development
	\include{Simulations/boundary_conditions}	% Chapter 5: Boundary conditions
	\include{Validation/validation}				% Chapter 6: Validation
	\include{Simulations/vascular_structure}	% Chapter 7: Vascular structure
	\include{Simulations/time_dependency}		% Chapter 8: Time-dependent effects
	\include{Conclusions/conclusions}			% Chapter 9: Conclusions
	\include{Appendix/appendix}					% Appendices

%% ================================================================== References

 	\setstretchref{}
	\newpage\phantomsection % Workaround to fix bookmark page numbering
 	
	% Page style
		\pagestyle{fancy}
		\lhead{{\sffamily \MakeUppercase\leftmark}}
		\chead{}
		\rhead{}
		\lfoot{}
		\cfoot{{\sffamily \thepage}}
		\rfoot{}
		
 	\addtocontents{toc}{\cftpagenumberson{chapter}}		% Show page number
	\addcontentsline{toc}{chapter}{References}			% Add line to TOC
	
	\bibliographystyle{IEEEtran}
	\bibliography{references}

\end{document}